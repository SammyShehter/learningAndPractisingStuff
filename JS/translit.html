<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Translit</title>
  <style>
    .title {
      display: flex;
      height: 90px;
      justify-content: center;
      align-items: center;
      background: lightgoldenrodyellow;
    }

    .textarea-wrapper {
      display: flex;
      justify-content: center;
      align-items: center;
      margin-top: 30px;
    }

    textarea {
      height: 20rem;
      width: 90%;
    }
  </style>
</head>

<body>
  <div class="title">
    <h1>Translit</h1>
  </div>
  <div class="textarea-wrapper">
    <textarea id="translit"></textarea>
  </div>

  <script>
    var latSimple = [
      'a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i', 'j', 'k', 'l', 'm', 'n', 'o', 'p', 'q','r', 's', 't','u', 'v', 'w', 'x', 'y', 'z', "'"
    ];
    var kirSimple = [
      'а', 'б', 'с', 'д', 'е', 'ф', 'г', 'х', 'и', 'й', 'к', 'л', 'м', 'н', 'о', 'п', 'г','р', 'с', 'т','у', 'в', 'ш', 'х', 'ы', 'з', 'ь'
    ];
    var latSpec = ['ыo','зh','сh','ыe','аj','ыa','йa','ыu','йu'];
    var kirSpec = ['ё','ж','ч','э','й','я','я','ю','ю'];

    let text = document.getElementById("translit");
    text.addEventListener('input', (event) => {

      let key = event.data;
      let specCaseUsed = false;


      let specCase = text.value;
      specCase = specCase.substring(specCase.length, specCase.length - 2);
      
      for(let i = 0; i < latSpec.length; i++){
        if(specCase == latSpec[i]){
          let str = text.value;
          str = str.substring(0, str.length - 2);
          text.value = str;
          text.value += kirSpec[i];
          specCaseUsed = true;
        }
      }

      if(!specCaseUsed){
        for (let j = 0; j < latSimple.length; j++) {
          if (key === latSimple[j]) {
            event.preventDefault();
            let str = text.value;
            str = str.substring(0, str.length - 1);
            text.value = str;
            text.value += kirSimple[j];
          }
        }
      }
      
      

    });
  </script>
</body>

</html>